{% extends "base.html" %}
{% block title %}Flask Tutorial — Build a Student Sign-In Website{% endblock %}

{% block content %}
<div class="max-w-5xl mx-auto px-6 py-12 space-y-12">

  <section class="bg-white p-6 rounded-2xl shadow-md space-y-6">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">0. Waitress and Gunicorn: A Comparative Study on Flask Production Deployment</h2>
    <p>
      In professional web development, the Flask framework’s built-in server is primarily designed for development rather than production use. 
      To ensure security, scalability, and performance, deploying Flask applications with a WSGI (Web Server Gateway Interface) server such as 
      <strong>Waitress</strong> or <strong>Gunicorn</strong> is essential. This section offers a detailed comparison between the two and practical recommendations for selecting one based on deployment context.
    </p>

    <h3 class="text-xl font-bold text-green-600">1. Why Production WSGI Servers Are Necessary</h3>
    <p>
      The built-in Flask server is lightweight but not thread-safe or optimized for concurrent user requests. Production-grade WSGI servers handle multiple 
      requests simultaneously, provide improved error handling, and can be easily integrated with reverse proxies such as Nginx. They ensure stability under 
      heavy loads and offer greater control over scalability.
    </p>

    <h3 class="text-xl font-bold text-green-600">2. Comparison Between Waitress and Gunicorn</h3>
    <p>
      The table below summarizes the technical characteristics of both servers, including platform support, performance, and configuration flexibility.
    </p>

    <table class="min-w-full border-collapse border border-gray-300 text-sm">
      <thead class="bg-green-100 text-green-800">
        <tr>
          <th class="border border-gray-300 px-3 py-2 text-left">Feature</th>
          <th class="border border-gray-300 px-3 py-2 text-left">Waitress</th>
          <th class="border border-gray-300 px-3 py-2 text-left">Gunicorn</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="border border-gray-300 px-3 py-2">Operating System Support</td>
          <td class="border border-gray-300 px-3 py-2">Cross-platform (Windows, macOS, Linux)</td>
          <td class="border border-gray-300 px-3 py-2">Primarily Linux/Unix; limited Windows support</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-3 py-2">Performance</td>
          <td class="border border-gray-300 px-3 py-2">Good for small to medium workloads</td>
          <td class="border border-gray-300 px-3 py-2">Excellent for high concurrency and large-scale systems</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-3 py-2">Ease of Configuration</td>
          <td class="border border-gray-300 px-3 py-2">Simple and beginner-friendly</td>
          <td class="border border-gray-300 px-3 py-2">Highly configurable and powerful</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-3 py-2">Community & Documentation</td>
          <td class="border border-gray-300 px-3 py-2">Smaller community, clear docs</td>
          <td class="border border-gray-300 px-3 py-2">Extensive documentation and mature ecosystem</td>
        </tr>
        <tr>
          <td class="border border-gray-300 px-3 py-2">Best Use Case</td>
          <td class="border border-gray-300 px-3 py-2">Educational projects, cross-platform demos</td>
          <td class="border border-gray-300 px-3 py-2">Enterprise-level or Linux server deployment</td>
        </tr>
      </tbody>
    </table>

    <h3 class="text-xl font-bold text-green-600 mt-6">3. Practical Application Examples</h3>
    <pre class="bg-gray-100 p-4 rounded-xl shadow-inner text-sm">
# Deploy using Waitress
pip install waitress
waitress-serve --port=5000 app:app

# Deploy using Gunicorn
pip install gunicorn
gunicorn --bind 0.0.0.0:5000 app:app
    </pre>
    <p>
      The first command demonstrates how to run a Flask app on Windows or macOS using Waitress. The second command shows the Gunicorn deployment method typically used on Linux servers or platforms such as Render and PythonAnywhere.
    </p>

    <h3 class="text-xl font-bold text-green-600">4. Selection Recommendation</h3>
    <p>
      Developers are advised to use <strong>Waitress</strong> for local demonstrations and cross-platform compatibility due to its simplicity and ease of use.
      On the other hand, <strong>Gunicorn</strong> should be the default choice for cloud or enterprise-level deployment, offering better scalability and 
      integration with reverse proxies such as Nginx or Caddy.
    </p>

    <p class="italic text-gray-600">
      Summary: Waitress emphasizes accessibility and simplicity, while Gunicorn focuses on performance and extensibility. Both are valuable tools in a Flask developer’s deployment toolkit.
    </p>
  </section>


  
  <section class="bg-green-50 p-6 rounded-2xl shadow-md">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">1. Objective</h2>
    <p>This tutorial introduces the basic workflow of Flask web development. Students will learn to create a simple student sign-in website and understand how Flask handles routing, templates, forms, and session management.</p>
  </section>
  
  <section class="bg-white p-6 rounded-2xl shadow-md">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">2. Learning Outcomes</h2>
    <ul class="list-disc list-inside space-y-2">
      <li>Install and configure the Flask development environment.</li>
      <li>Create and run a basic Flask web application.</li>
      <li>Use the Jinja2 template engine to design dynamic web pages and handle user input.</li>
      <li>Utilize session technology to manage user state and render dynamic content.</li>
      <li>Understand the basics of data persistence and production environment deployment.</li>
    </ul>
  </section>

 
  <section class="bg-green-50 p-6 rounded-2xl shadow-md space-y-6">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">3. Environment Setup</h2>
    <p>We recommend using the latest version of Python, flask 3.8 or higher is required. Install Flask using the command below:<br>
    You can follow with this steps below if it is your first look with the Python.<br>
    Python comes bundled with the venv module to create virtual environments.<br>
    Install Flask</p>

    <p>3.1 Create a project folder and a .venv folder within:</p>
    <div class="grid grid-cols-2 gap-4">
      <img src="{{ url_for('static', filename='images/29.png') }}" class="rounded-xl shadow-md">
      <img src="{{ url_for('static', filename='images/30.png') }}" class="rounded-xl shadow-md">
    </div>

    <p>3.2 And then you can activate the environment: Before you work on your project, activate the corresponding environment:</p>
    <div class="grid grid-cols-2 gap-4">
      <img src="{{ url_for('static', filename='images/31.png') }}" class="rounded-xl shadow-md">
      <img src="{{ url_for('static', filename='images/32.png') }}" class="rounded-xl shadow-md">
    </div>
    <p>Your shell prompt will change to show the name of the activated environment.</p>

    <p>3.3 Install flask: After ensuring the virtual environment is activated, enter the following command in the terminal to install flask.</p>
    <img src="{{ url_for('static', filename='images/33.png') }}" class="my-8 mx-auto rounded-xl shadow-md">

    <p>A minimal Flask application looks something like this:</p>
    <img src="{{ url_for('static', filename='images/34.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Save it as hello.py or something similar, running the application using the flask command or python -m flask. You need to tell the Flask where your application is with the --app option.<br>
    You can type the flask.run . Now head over to http://127.0.0.1:5000/ ，and you should see your hello world greeting.</p>

    <p>3.4 Now turn around with our formal project: A student sign-in system. Recommended folder structure:<br>
    What we need to do is to create files like the structure below. And then you can run the flask. (You can copy it in the github that we have upload）</p>
    <img src="{{ url_for('static', filename='images/35.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
  </section>

 
  <section class="bg-white p-6 rounded-2xl shadow-md space-y-6">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">4. Core Components</h2>
    <h3 class="text-xl font-bold text-green-600">4.1 The most important one is to create the app.py. It is the core magic.</h3>
    <p>Http Methods:<br>
    The whole code is in the zip on github: <a href="https://group-j.onrender.com" class="text-green-700 underline">https://group-j.onrender.com</a><br>
    Open the ven.v and you will see the app.py. It just look like this.<br>
    Web applications use different HTTP methods when accessing URLs. You can use different methods argument of the route( ) decorator to handle different Http methods.</p>

    <img src="{{ url_for('static', filename='images/36.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>If GET is present, Flask automatically adds support for head method and handles head requests according to the HTTP RFC. Likewise, OPTIONS is automatically implemented for you.</p>

    <div class="grid grid-cols-3 gap-4">
      <img src="{{ url_for('static', filename='images/37.png') }}" class="rounded-xl shadow-md">
      <img src="{{ url_for('static', filename='images/38.png') }}" class="rounded-xl shadow-md">
      <img src="{{ url_for('static', filename='images/39.png') }}" class="rounded-xl shadow-md">
    </div>
    <p>Use the route ( ) decorator to bind a function to a URL.</p>

    <h3 class="text-xl font-bold text-green-600">4.2 Jinja2 Templates: Inheritance and Loop</h3>
    <p>Jinja is a template language that renders the pages your application serves.<br>
    templet：{% raw %}{% for item in items %}  {{ item }} {% endfor %}{% endraw %}<br>
    Jinja2 template syntax: {% raw %}{% for %}{% endraw %} for loops, {{ item }} outputs variable values; rendering occurs on the server side, returning pure HTML.<br>
    Templates allow embedding Python variables into HTML, achieving separation of business logic and presentation layer.</p>
    <img src="{{ url_for('static', filename='images/40.png') }}" class="my-8 mx-auto rounded-xl shadow-md">

    <p>Render the template in the view function:<br>
    return render_template('list.html', items=my_list)<br>
    Read list.html from the templates directory, inject items=my_list; achieve the separation of "logic (Python) / presentation (HTML)".</p>

    <h3 class="text-xl font-bold text-green-600">4.3 Receiving browser data</h3>
    <div class="grid grid-cols-2 gap-4">
      <img src="{{ url_for('static', filename='images/41.png') }}" class="rounded-xl shadow-md">
      <img src="{{ url_for('static', filename='images/42.png') }}" class="rounded-xl shadow-md">
    </div>
    <p>This primarily utilizes request.form for scenarios such as reading student and teacher data login submission forms.</p>

    <h3 class="text-xl font-bold text-green-600">4.4 Redirects & Session (the three lines from PPT)</h3>
    <img src="{{ url_for('static', filename='images/43.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Enable session signing (and some security features); production environments must use complex random values.</p>
    <img src="{{ url_for('static', filename='images/44.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Write the login username into the session to achieve "cross-request" login state persistence.<br>
    Login successful, writing to teacher_logged_in</p>
    <img src="{{ url_for('static', filename='images/45.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>PRG (Post/Redirect/Get) Pattern: Redirect after form submission to prevent duplicate submissions caused by refreshing.<br>
    Login successful redirect</p>
    <img src="{{ url_for('static', filename='images/46.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Redirect when accessing the management page without logging in.</p>
    <img src="{{ url_for('static', filename='images/47.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
  </section>

  
  <section class="bg-green-50 p-6 rounded-2xl shadow-md space-y-6">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">5. Practical Code</h2>
    <p>5.1 Project directory structure</p>
    <img src="{{ url_for('static', filename='images/48.png') }}" class="my-8 mx-auto rounded-xl shadow-md">

    <p>5.2 Student sign-in page core logic<br>
    Initialize the first occurrence of a name to 0 points to avoid errors (missing key) when adding/subtracting points.<br>
    Students is an in-memory dictionary for demonstration purposes: data will be lost upon restart.</p>
    <img src="{{ url_for('static', filename='images/49.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>success.html</p>
    <img src="{{ url_for('static', filename='images/50.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>app.py</p>
    <img src="{{ url_for('static', filename='images/51.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Functionality demo(Student Edition)</p>
    <img src="{{ url_for('static', filename='images/52.png') }}" class="my-8 mx-auto rounded-xl shadow-md">

    <p>5.3 Teacher portal<br>
    Iterate students dict in a table and add an action button for each row.<br>
    Render students.items() in a table row by row; place "+1/-1" buttons in each row (hidden fields carry the name).<br>
    Upon receiving a POST request, the backend adjusts the scores and redirects back to this page to display the latest scores.</p>
    <img src="{{ url_for('static', filename='images/53.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>app.py</p>
    <img src="{{ url_for('static', filename='images/54.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Feature Demo (Teacher Edition)</p>
    <img src="{{ url_for('static', filename='images/55.png') }}" class="my-8 mx-auto rounded-xl shadow-md">

    <p>5.4 Bonus/Penalty & Random Roll Call<br>
    Trigger button：flask/templates/admin.html<br>
    Form name= random_draw (Bottom random button)</p>
    <img src="{{ url_for('static', filename='images/56.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <p>Random selection logic: flask/app.py displays the selected result after execution</p>
    <img src="{{ url_for('static', filename='images/57.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
  </section>

  
  <section class="bg-white p-6 rounded-2xl shadow-md space-y-6">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">6. Deployment & Scaling</h2>
    <p>6.1 Production environment startup commands<br>
    Flask's built-in development server is not suitable for production. We can use Waitress or Gunicorn.<br>
    Deploy command:</p>
    <pre class="bg-gray-100 p-4 rounded-xl shadow-inner text-sm">
pip install waitress
waitress-serve --port=5000 app:app

pip install gunicorn
gunicorn --bind 0.0.0.0:5000 app:app
    </pre>

    <h3 class="text-xl font-bold text-green-600">6.2 Development & Security</h3>
    <img src="{{ url_for('static', filename='images/58.png') }}" class="my-8 mx-auto rounded-xl shadow-md">
    <ul class="list-disc list-inside space-y-2">
      <li>Debug Mode: Set ‘debug=True’ during development for hot reloading and detailed error pages.</li>
      <li>Secret Key Management: The ‘SECRET_KEY’ is crucial for session security. It must be a strong random value and must never be committed to a public repository.</li>
    </ul>
  </section>

  
  <section class="bg-green-50 p-6 rounded-2xl shadow-md space-y-4">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">7. Running the Application</h2>
    <ol class="list-decimal list-inside space-y-2">
      <li>Run the following command in your terminal: python app.py</li>
      <li>Then open http://127.0.0.1:5000 in your browser.</li>
      <li>Try signing in with a name, and observe the attendance list and admin functions.</li>
    </ol>
  </section>

  
  <section class="bg-white p-6 rounded-2xl shadow-md space-y-4">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">8. Discussion and Extensions</h2>
    <p>This exercise demonstrates how Flask integrates Python with web interfaces. Possible improvements include adding database support with SQLite, login features using Flask-Login, and asynchronous updates via AJAX.</p>
  </section>

 
  <section class="bg-green-50 p-6 rounded-2xl shadow-md space-y-4">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">9. Conclusion</h2>
    <p>Through this tutorial, learners can understand the foundation of Flask web development and gain confidence to expand into more complex web applications.</p>
  </section>

 
  <section class="bg-white p-6 rounded-2xl shadow-md space-y-4">
    <h2 class="text-2xl font-semibold text-green-700 mb-4">10. References</h2>
    <ul class="list-disc list-inside space-y-2">
      <li>Albesher, L., & Alfayez, R. (2024). An Observational Study on Flask Web Framework Questions on Stack Overflow (SO). IET Software.</li>
      <li>Bonney, M., de Angelis, M., Dal Borgo, M., Andrade, L., Beregi, S., Jamia, N., & Wagg, D. (2022). Development of a Digital Twin Operational Platform Using Python Flask. Data-Centric Engineering.</li>
      <li>Liang, Z., Liang, Z., Zheng, Y., Liang, B., & Zheng, L. (2021). Data Analysis and Visualization Platform Design for Batteries Using Flask-Based Python Web Service. World Electric Vehicle Journal.</li>
      <li>Zhang, D., & You, S. (2020). iFlask: Isolate Flask Security System from Dangerous Execution Environment by Using ARM TrustZone. Future Generation Computer Systems.</li>
      <li>Guirales, S., Machado, D., Schneider, A., & Janies, D. (2020). FLAVi-Web: A Web Annotator for Viral Genomes of Flaviviridae with Flask. The FASEB Journal.</li>
      <li>Wang, Z., Xiang, H., & Zhang, L. (2024). Design of a Classroom Big Data Analysis System Based on Open Source Technology. ICEIT.</li>
      <li>Li, Z. (2023). The Construction of Online Learning System Based on Flask.</li>
      <li>DeCausemaker, R., & Jacobs, S. (2015).</li>
      <li>Landschaft, O., & Wishkerman, A. (2024). FlaskLED: An Additive Manufacturing Approach for Low-Cost Bioreactors. Journal of Applied Phycology.</li>
    </ul>
  </section>

</div>
{% endblock %}